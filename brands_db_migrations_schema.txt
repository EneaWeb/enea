###################################
###################################

create database named like 'brandSlug'.sqlite
set delimiter %%

###################################
###################################
set delimiter %%

CREATE TABLE 'attributes' (
	'id' TEXT PRIMARY KEY NOT NULL,
	'name' TEXT NOT NULL,
	'description' TEXT,
	'active' INTEGER DEFAULT 1,
	'created_at' DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
	'updated_at' DATETIME
)%%

INSERT INTO 'attributes' ('id','name','description','active','updated_at') 
VALUES ('color','active_types','0', NULL)%%

CREATE TABLE 'item_prices' (
	'id' INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
	'item_id' INTEGER NOT NULL,
	'price_list_id' INTEGER NOT NULL,
	'price' REAL NOT NULL,
	'created_at' DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
	'updated_at' DATETIME
)%%

CREATE TABLE 'items' (
	'id' INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
	'product_id' INTEGER NOT NULL,
	'variation_id' INTEGER NOT NULL,
	'size_id' INTEGER NOT NULL,
	'active' INTEGER DEFAULT 1,
	'created_at' DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
	'updated_at' DATETIME
)%%

CREATE TABLE 'logs' (
	'id' INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
	'product_id' INTEGER,
	'customer_id' INTEGER,
	'order_id' INTEGER,
	'user_id' INTEGER,
	'action' TEXT NOT NULL DEFAULT 'U',
	'created_at' DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
	'updated_at' DATETIME
)%%

CREATE TABLE 'options' (
	'id' INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
	'name' TEXT NOT NULL,
	'value' TEXT,
	'created_at' DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
	'updated_at' DATETIME
)%%

INSERT INTO 'options' ('id','name','value','updated_at') 
VALUES (NULL,'active_season','1', NULL)%%

INSERT INTO 'options' ('id','name','value','updated_at') 
VALUES (NULL,'agent_all_customers','0', NULL)%%

INSERT INTO 'options' ('id','name','value','updated_at') 
VALUES (NULL,'active_types','0', NULL)%%

CREATE TABLE 'order_details' (
	'id' INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 
	'order_id' INTEGER NOT NULL, 
	'product_id' INTEGER NOT NULL,
	'variation_id' INTEGER NOT NULL, 
	'item_id' INTEGER NOT NULL, 
	'qty' INTEGER, 'price' REAL NOT NULL, 
	'total_price' REAL NOT NULL, 
	'created_at' DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP, 
	'updated_at' DATETIME
)%%

CREATE TABLE 'order_image' (
	'id' INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 
	'order_id' INTEGER, 
	'image' INTEGER, 
	'created_at' DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP, 
	'updated_at' DATETIME
)%%

CREATE TABLE 'orders' (
	'id' INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 
	'user_id' INTEGER NOT NULL, 
	'customer_id' INTEGER NOT NULL, 
	'season_id' INTEGER NOT NULL, 
	'price_list_id' INTEGER NOT NULL, 
	'season_delivery_id' INTEGER NOT NULL, 
	'customer_delivery_id' INTEGER NOT NULL, 
	'products_qty' INTEGER NOT NULL, 
	'items_qty' INTEGER NOT NULL, 
	'subtotal' REAL,
	'payment_id' INTEGER NOT NULL, 
	'payment_action' TEXT, 
	'payment_amount' REAL, 
	'total' REAL NOT NULL,
	'note' TEXT,
	'products_array' TEXT,
	'created_at' DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP, 
	'updated_at' DATETIME
)%%

CREATE TABLE 'payments' (
	'id' INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 
	'slug' TEXT NOT NULL, 
	'name' TEXT NOT NULL, 
	'description' TEXT, 
	'action' TEXT, 
	'amount' REAL NOT NULL, 
	'days' INTEGER, 
	'active' INTEGER NOT NULL DEFAULT 1 , 
	'created_at' DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP, 
	'updated_at' DATETIME
)%%

CREATE TABLE 'price_lists' (
	'id' TEXT PRIMARY KEY NOT NULL, 
	'name' TEXT NOT NULL, 
	'active' INTEGER NOT NULL DEFAULT 1, 
	'created_at' DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP, 
	'updated_at' DATETIME
)%%

CREATE TABLE 'prodmodels' (
	'id' INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 
	'slug' TEXT, 
	'name' TEXT NOT NULL, 
	'description' TEXT, 
	'picture' TEXT, 
	'type_id' INTEGER NOT NULL, 
	'active' IINTEGER NOT NULL DEFAULT 1 , 
	'created_at' DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP, 
	'updated_at' DATETIME
)%%

CREATE TABLE 'products' (
	'id' INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 
	'prodmodel_id' INTEGER NOT NULL, 
	'season_id' INTEGER NOT NULL, 
	'type_id' INTEGER NOT NULL, 
	'sku' TEXT, 
	'name' TEXT NOT NULL, 
	'description' TEXT, 
	'pictures' TEXT NOT NULL DEFAULT 'a:1:{i:0;s:11:"default.jpg";}', 
	'has_variations' INTEGER NOT NULL DEFAULT 1, 
	'active' INTEGER NOT NULL DEFAULT 1,
	'created_at' DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP, 
	'updated_at' DATETIME
)%%

CREATE TABLE 'season_deliveries' (
	'id' INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 
	'slug' TEXT, 
	'name' TEXT NOT NULL, 
	'season_id' INTEGER NOT NULL, 
	'date' TEXT, 
	'active' INTEGER NOT NULL DEFAULT 1, 
	'created_at' DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP, 
	'updated_at' DATETIME
)%%

CREATE TABLE 'seasons' (
	'id' INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 
	'slug' TEXT,
	'name' TEXT NOT NULL, 
	'description' TEXT, 
	'active' INTEGER NOT NULL DEFAULT 1, 
	'created_at' DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP, 
	'updated_at' DATETIME
)%%

CREATE TABLE 'sizes' (
	'id' TEXT PRIMARY KEY NOT NULL, 
	'name' TEXT NOT NULL, 
	'types' TEXT, 
	'active' INTEGER NOT NULL DEFAULT 1,
	'created_at' DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP, 
	'updated_at' DATETIME
)%%

CREATE TABLE 'term_variation' (
	'variation_id' INTEGER NOT NULL,
	'term_id' TEXT NOT NULL
)%%

CREATE TABLE 'terms' (
	'id' TEXT PRIMARY KEY NOT NULL, 
	'attribute_id' TEXT NOT NULL, 
	'name' TEXT NOT NULL, 
	'color' TEXT,
	'active' INTEGER NOT NULL DEFAULT 1,
	'created_at' DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP, 
	'updated_at' DATETIME
)%%

CREATE TABLE 'user_price_list' (
	'id' INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 
	'user_id' INTEGER NOT NULL,
	'price_list_id' INTEGER NOT NULL, 
	'created_at' DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP, 
	'updated_at' DATETIME
)%%

CREATE TABLE 'variations' (
	'id' INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, 
	'product_id' INTEGER NOT NULL, 
	'sku' TEXT, 
	'description' TEXT, 
	'pictures' TEXT NOT NULL DEFAULT 'a:1:{i:0;s:11:"default.jpg";}', 
    'active' INTEGER NOT NULL DEFAULT 1,
	'created_at' DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP, 
	'updated_at' DATETIME
)%%


###################################
###################################

SCARTATO

###################################
###################################

CREATE TABLE 'term_product' (
	'term_id' INTEGER NOT NULL, 
	'product_id' INTEGER NOT NULL
);